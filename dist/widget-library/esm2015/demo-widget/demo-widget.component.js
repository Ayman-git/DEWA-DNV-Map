import * as tslib_1 from "tslib";
import { Component, Input } from '@angular/core';
import { InventoryService } from '@c8y/ngx-components/api';
import { EventService, OperationService } from '@c8y/ngx-components/api';
import { AlertService } from '@c8y/ngx-components';
import * as L from 'leaflet';
let WidgetDemo = class WidgetDemo {
    constructor(eventService, operationService, alert, inventoryService) {
        this.eventService = eventService;
        this.operationService = operationService;
        this.alert = alert;
        this.inventoryService = inventoryService;
        this.mymap = null;
        this.popupstring = "<div class=\"card\" style=\"width: 200px; background-color: white;\"><img src=\"https://img.icons8.com/ios/50/000000/substation.png\" class=\"card-img-top\"style=\"width: 200px; height:100px\"><div class=\"card-body\"><br><h4 class=\"card-title\"></h4><hr style = \"margin-top: 2px; margin-bottom: 2px;\"><dl><dt>LM</dt><dd >8400</dd><hr style = \"margin-top: 2px; margin-bottom: 2px;\"><dt >Installation date</dt><dd class=>15 Jan 2020</dd><hr style = \"margin-top: 2px; margin-bottom: 2px;\"><dt>Running hours</dt><dd>482</dd><hr style = \"margin-top: 2px; margin-bottom: 2px;\"><dt translate=\"\">Status</dt><dd><span class = \"text-success\"> Active </span></dd><hr style = \"margin-top: 2px; margin-bottom: 2px;\"><a href = \"#\" class=\"card-link\">Request Maintenance</a></dl></div></div>";
        this.device_markers = {};
        this.devices = [];
        this.green_icon = L.icon({
            iconUrl: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAPCAMAAAA1b9QjAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAMlQTFRFAAAAAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhDAHhD0AtUWgAAAEN0Uk5TABCEJwYLReR/HAECKqf+00wNF2jq//maLAM9uOBiFnP1Okm36HgSk/O8ZdL98KH00Wl827FBw/redgmVvjTZ64668gpU0PkAAACSSURBVHicTc7XFoIwFETRGwE7MaJXxYqKghrF3vv/f5SGZEHO417zMAAykjFM0LOyuXyhqEGpbNMKq2ri1OrYaLZScNsditjtkUT6Aw//2UNXgTkaC0B/MlViBGEsdMaUzBc8FlwGjpysIgnI1xvxydruqBKM9uLB4XjCpPPlCuTmp4De/QHsyTXB1xs+oQ7Ivz9BtRFuDMkS8QAAAABJRU5ErkJggg==',
        });
        this.red_icon = L.icon({
            iconUrl: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAPCAMAAAA1b9QjAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAN5QTFRFAAAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA/wAA9PpplAAAAEp0Uk5TAAMYBy6lNAkCH4LsiiIOT9L/11QQLJX6/JwwX9rfZBI4ovupPRN66u6BSbj9vlAejugjBFvGzGMFJ+3vLQZz3OB8CBy5R5mqmk5Ohx5FAAAAlUlEQVR4nFXMaReBUBSF4XMzRcIhucYklCFknufx//8hpVr3ej8+a68N4EcEAn9ForF4ggcxmZLSsshJJpvDfEHhJkW1hLRcYVdKtYaI9YYWAmnqLVeo0Q5Hna6JXlZPCKQ/oD8Z2iMfxhMH/SR16sFsvqCB0OVq7cpG32LYztgDHI4nZJ0vV7jdHYtl2jI8ni++9+cL8zcUfiF5cpMAAAAASUVORK5CYII=',
        });
        this.myIcon = null;
    }
    ngOnInit() {
        this.mymap = L.map('mapid').setView([24.760698, 55.366582], 15);
        console.log('I am here');
        L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
            attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
            maxZoom: 18,
            id: 'mapbox/streets-v11',
            tileSize: 512,
            zoomOffset: -1,
            accessToken: 'sk.eyJ1IjoiY2V3OTc2NSIsImEiOiJja3N1aGpvZHIwMjloMm9wdDh2ZnNkbWtiIn0.kmUh2ED3rl3LQAygquxr3w'
        }).addTo(this.mymap);
        let i = 0;
        let substation_locations = [
            [24.758008, 55.362967],
            [24.759733, 55.361875],
            [24.767669, 55.369639],
            [24.761822, 55.363267],
            [24.761786, 55.363214]
        ];
        let location_names = [
            "PK11939A",
            "PK15326A",
            "PK15018A",
            "PK15292A",
            "PK15324A"
        ];
        let alarms = [
            "",
            "critical",
            "",
            "",
            ""
        ];
        let alarms_num = [
            0,
            2,
            0,
            0,
            0
        ];
        let feeders_num = [
            5,
            5,
            5,
            6,
            7
        ];
        let url = [
            `https://dewa.eu-latest.cumulocity.com/apps/app-builder/index.html#/application/57646/dashboard/405287/device/21250`,
            `https://dewa.eu-latest.cumulocity.com/apps/app-builder/index.html#/application/57646/dashboard/822600`,
            `https://dewa.eu-latest.cumulocity.com/apps/app-builder/index.html#/application/57646/dashboard/823524`,
            `https://dewa.eu-latest.cumulocity.com/apps/app-builder/index.html#/application/57646/dashboard/821765`,
            `https://dewa.eu-latest.cumulocity.com/apps/app-builder/index.html#/application/57646/dashboard/822603`
        ];
        for (i = 0; i < substation_locations.length; i++) {
            if (alarms[i] == "") {
                this.myIcon = this.green_icon;
            }
            else if (alarms[i] == "critical") {
                this.myIcon = this.red_icon;
            }
            this.myIcon.options.iconSize = ["10px", "10px"];
            let marker = L.marker([substation_locations[i][0], substation_locations[i][1]], { icon: this.myIcon });
            let ppstring = `<div class=\"card\" style=\"width: 150px; background-color: white; color: black;\">             
            <div class=\"card-body\"><br><h4 class=\"card-title\"></h4> 
                <hr style = \"margin-top: 2px; margin-bottom: 2px;\"> 
                <dl>
                    <dt>Name</dt>
                    <dd> ` + location_names[i] + ` </dd>
                    <hr style = \"margin-top: 2px; margin-bottom: 2px;\">                                                             
                    <hr style = \"margin-top: 2px; margin-bottom: 2px;\">
                    <dt translate=\"\">Active Alarms</dt>
                    <dd><span class = \"text-warning\">` + alarms_num[i] + `</span></dd>
                    <dt translate=\"\">Number of feeders</dt>
                    <dd><span class = \"text-warning\">` + feeders_num[i] + `</span></dd>
                    <hr style = \"margin-top: 2px; margin-bottom: 2px;\">
                    <a href = \"` + url[i] + `\" class=\"card-link\">Access Dashboard</a>
                </dl></div></div>`;
            marker.addTo(this.mymap);
            marker.bindPopup(ppstring);
        }
    }
    ;
};
WidgetDemo.ctorParameters = () => [
    { type: EventService },
    { type: OperationService },
    { type: AlertService },
    { type: InventoryService }
];
tslib_1.__decorate([
    Input()
], WidgetDemo.prototype, "config", void 0);
WidgetDemo = tslib_1.__decorate([
    Component({
        template: "<p class=''>{{config.devices}} </p>\r\n<div id=\"mapid\"></div>\r\n\r\n",
        styles: [`../styles/index.css`]
    })
], WidgetDemo);
export { WidgetDemo };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVtby13aWRnZXQuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vZGRtLXdpZGdldC8iLCJzb3VyY2VzIjpbImRlbW8td2lkZ2V0L2RlbW8td2lkZ2V0LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQVUsTUFBTSxlQUFlLENBQUM7QUFDekQsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0seUJBQXlCLENBQUM7QUFDM0QsT0FBTyxFQUFDLFlBQVksRUFBRSxnQkFBZ0IsRUFBQyxNQUFNLHlCQUF5QixDQUFDO0FBQ3ZFLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUNuRCxPQUFPLEtBQUssQ0FBQyxNQUFNLFNBQVMsQ0FBQztBQU83QixJQUFhLFVBQVUsR0FBdkIsTUFBYSxVQUFVO0lBMEJuQixZQUVZLFlBQTBCLEVBQzFCLGdCQUFrQyxFQUNsQyxLQUFtQixFQUNuQixnQkFBa0M7UUFIbEMsaUJBQVksR0FBWixZQUFZLENBQWM7UUFDMUIscUJBQWdCLEdBQWhCLGdCQUFnQixDQUFrQjtRQUNsQyxVQUFLLEdBQUwsS0FBSyxDQUFjO1FBQ25CLHFCQUFnQixHQUFoQixnQkFBZ0IsQ0FBa0I7UUExQnZDLFVBQUssR0FBVSxJQUFJLENBQUM7UUFDcEIsZ0JBQVcsR0FBSSw2eEJBQTZ4QixDQUFDO1FBQzV5QixtQkFBYyxHQUFHLEVBQUUsQ0FBQTtRQUNwQixZQUFPLEdBQXFCLEVBQUUsQ0FBQTtRQUk5QixlQUFVLEdBQVcsQ0FBQyxDQUFDLElBQUksQ0FBQztZQUMvQixPQUFPLEVBQUUsNHRCQUE0dEI7U0FFeHVCLENBQUMsQ0FBQTtRQUVLLGFBQVEsR0FBVyxDQUFDLENBQUMsSUFBSSxDQUFDO1lBQ2pDLE9BQU8sRUFBRSxvd0JBQW93QjtTQUVoeEIsQ0FBQyxDQUFBO1FBS1MsV0FBTSxHQUFXLElBQUksQ0FBQztJQVF0QixDQUFDO0lBRVIsUUFB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QyxTQUFTLENBQUMsUUFBUSxDQUFDLENBQUM7U0FDOUI7SUFHTCxDQUFDO0lBQUEsQ0FBQztDQUNMLENBQUE7O1lBNUg2QixZQUFZO1lBQ1IsZ0JBQWdCO1lBQzNCLFlBQVk7WUFDRCxnQkFBZ0I7O0FBNUJyQztJQUFSLEtBQUssRUFBRTswQ0FBUTtBQUhQLFVBQVU7SUFKdEIsU0FBUyxDQUFDO1FBQ1AsbUZBQTJDO2lCQUNqQyxxQkFBcUI7S0FDbEMsQ0FBQztHQUNXLFVBQVUsQ0F3SnRCO1NBeEpZLFVBQVUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIElucHV0LCBPbkluaXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgSW52ZW50b3J5U2VydmljZSB9IGZyb20gJ0BjOHkvbmd4LWNvbXBvbmVudHMvYXBpJztcclxuaW1wb3J0IHtFdmVudFNlcnZpY2UsIE9wZXJhdGlvblNlcnZpY2V9IGZyb20gJ0BjOHkvbmd4LWNvbXBvbmVudHMvYXBpJztcclxuaW1wb3J0IHsgQWxlcnRTZXJ2aWNlIH0gZnJvbSAnQGM4eS9uZ3gtY29tcG9uZW50cyc7XHJcbmltcG9ydCAqIGFzIEwgZnJvbSAnbGVhZmxldCc7XHJcbmltcG9ydCB7SU1hbmFnZWRPYmplY3R9IGZyb20gXCJAYzh5L2NsaWVudC9saWIvc3JjL2ludmVudG9yeS9JTWFuYWdlZE9iamVjdFwiO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgICB0ZW1wbGF0ZVVybDogJy4vZGVtby13aWRnZXQuY29tcG9uZW50Lmh0bWwnLFxyXG4gICAgc3R5bGVzOiBbIGAuLi9zdHlsZXMvaW5kZXguY3NzYCBdXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBXaWRnZXREZW1vIGltcGxlbWVudHMgT25Jbml0e1xyXG5cclxuXHJcbiAgICBASW5wdXQoKSBjb25maWc7XHJcblxyXG4gICAgcHVibGljIG15bWFwOiBMLm1hcCA9IG51bGw7XHJcbiAgICBwdWJsaWMgcG9wdXBzdHJpbmcgPSAgXCI8ZGl2IGNsYXNzPVxcXCJjYXJkXFxcIiBzdHlsZT1cXFwid2lkdGg6IDIwMHB4OyBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcXFwiPjxpbWcgc3JjPVxcXCJodHRwczovL2ltZy5pY29uczguY29tL2lvcy81MC8wMDAwMDAvc3Vic3RhdGlvbi5wbmdcXFwiIGNsYXNzPVxcXCJjYXJkLWltZy10b3BcXFwic3R5bGU9XFxcIndpZHRoOiAyMDBweDsgaGVpZ2h0OjEwMHB4XFxcIj48ZGl2IGNsYXNzPVxcXCJjYXJkLWJvZHlcXFwiPjxicj48aDQgY2xhc3M9XFxcImNhcmQtdGl0bGVcXFwiPjwvaDQ+PGhyIHN0eWxlID0gXFxcIm1hcmdpbi10b3A6IDJweDsgbWFyZ2luLWJvdHRvbTogMnB4O1xcXCI+PGRsPjxkdD5MTTwvZHQ+PGRkID44NDAwPC9kZD48aHIgc3R5bGUgPSBcXFwibWFyZ2luLXRvcDogMnB4OyBtYXJnaW4tYm90dG9tOiAycHg7XFxcIj48ZHQgPkluc3RhbGxhdGlvbiBkYXRlPC9kdD48ZGQgY2xhc3M9PjE1IEphbiAyMDIwPC9kZD48aHIgc3R5bGUgPSBcXFwibWFyZ2luLXRvcDogMnB4OyBtYXJnaW4tYm90dG9tOiAycHg7XFxcIj48ZHQ+UnVubmluZyBob3VyczwvZHQ+PGRkPjQ4MjwvZGQ+PGhyIHN0eWxlID0gXFxcIm1hcmdpbi10b3A6IDJweDsgbWFyZ2luLWJvdHRvbTogMnB4O1xcXCI+PGR0IHRyYW5zbGF0ZT1cXFwiXFxcIj5TdGF0dXM8L2R0PjxkZD48c3BhbiBjbGFzcyA9IFxcXCJ0ZXh0LXN1Y2Nlc3NcXFwiPiBBY3RpdmUgPC9zcGFuPjwvZGQ+PGhyIHN0eWxlID0gXFxcIm1hcmdpbi10b3A6IDJweDsgbWFyZ2luLWJvdHRvbTogMnB4O1xcXCI+PGEgaHJlZiA9IFxcXCIjXFxcIiBjbGFzcz1cXFwiY2FyZC1saW5rXFxcIj5SZXF1ZXN0IE1haW50ZW5hbmNlPC9hPjwvZGw+PC9kaXY+PC9kaXY+XCI7XHJcbiAgICBwdWJsaWMgIGRldmljZV9tYXJrZXJzID0ge31cclxuICAgIHB1YmxpYyBkZXZpY2VzOiBJTWFuYWdlZE9iamVjdFtdID0gW11cclxuICAgIFxyXG4gICAgXHJcblxyXG4gICAgcHVibGljIGdyZWVuX2ljb246IEwuaWNvbiA9IEwuaWNvbih7XHJcbiAgICAgICAgaWNvblVybDogJ2RhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQkVBQUFBUENBTUFBQUExYjlRakFBQUFBWE5TUjBJQjJja3Nmd0FBQUFsd1NGbHpBQUFMRXdBQUN4TUJBSnFjR0FBQUFNbFFURlJGQUFBQUFIaERBSGhEQUhoREFIaERBSGhEQUhoREFIaERBSGhEQUhoREFIaERBSGhEQUhoREFIaERBSGhEQUhoREFIaERBSGhEQUhoREFIaERBSGhEQUhoREFIaERBSGhEQUhoREFIaERBSGhEQUhoREFIaERBSGhEQUhoREFIaERBSGhEQUhoREFIaERBSGhEQUhoREFIaERBSGhEQUhoREFIaERBSGhEQUhoREFIaERBSGhEQUhoREFIaERBSGhEQUhoREFIaERBSGhEQUhoREFIaERBSGhEQUhoREFIaERBSGhEQUhoREFIaERBSGhEQUhoREFIaERBSGhEQUhoREFIaERBSGhEQUhoRDBBdFVXZ0FBQUVOMFVrNVRBQkNFSndZTFJlUi9IQUVDS3FmKzAwd05GMmpxLy9tYUxBTTl1T0JpRm5QMU9rbTM2SGdTay9POFpkTDk4S0gwMFdsODI3RkJ3L3JlZGdtVnZqVFo2NDY2OGdwVTBQa0FBQUNTU1VSQlZIaWNUYzdYRm9Jd0ZFVFJHd0U3TWFKWHhZcUtnaHJGM3Z2L2Y1U0daRUhPNDE3ek1BQXlrakZNMExPeXVYeWhxRUdwYk5NS3EycmkxT3JZYUxaU2NOc2RpdGp0a1VUNkF3Ly8yVU5YZ1RrYUMwQi9NbFZpQkdFc2RNYVV6QmM4Rmx3R2pweXNJZ25JMXh2eHlkcnVxQktNOXVMQjRYakNwUFBsQ3VUbXA0RGUvUUhzeVRYQjF4cytvUTdJdno5QnRSRnVETWtTOFFBQUFBQkpSVTVFcmtKZ2dnPT0nLFxyXG4gICAgICAgIFxyXG4gICAgfSlcclxuXHJcbiAgICBwdWJsaWMgcmVkX2ljb246IEwuaWNvbiA9IEwuaWNvbih7XHJcbiAgICBpY29uVXJsOiAnZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFCRUFBQUFQQ0FNQUFBQTFiOVFqQUFBQUFYTlNSMElCMmNrc2Z3QUFBQWx3U0ZsekFBQUxFd0FBQ3hNQkFKcWNHQUFBQU41UVRGUkZBQUFBL3dBQS93QUEvd0FBL3dBQS93QUEvd0FBL3dBQS93QUEvd0FBL3dBQS93QUEvd0FBL3dBQS93QUEvd0FBL3dBQS93QUEvd0FBL3dBQS93QUEvd0FBL3dBQS93QUEvd0FBL3dBQS93QUEvd0FBL3dBQS93QUEvd0FBL3dBQS93QUEvd0FBL3dBQS93QUEvd0FBL3dBQS93QUEvd0FBL3dBQS93QUEvd0FBL3dBQS93QUEvd0FBL3dBQS93QUEvd0FBL3dBQS93QUEvd0FBL3dBQS93QUEvd0FBL3dBQS93QUEvd0FBL3dBQS93QUEvd0FBL3dBQS93QUEvd0FBL3dBQS93QUEvd0FBL3dBQS93QUEvd0FBL3dBQS93QUEvd0FBL3dBQTlQcHBsQUFBQUVwMFVrNVRBQU1ZQnk2bE5Ba0NINExzaWlJT1Q5TC8xMVFRTEpYNi9Kd3dYOXJmWkJJNG92dXBQUk42NnU2QlNiajl2bEFlanVnakJGdkd6R01GSiszdkxRWnozT0I4Q0J5NVI1bXFtazVPaHg1RkFBQUFsVWxFUVZSNG5GWE1hUmVCVUJTRjRYTXpSY0lodWNZa2xDRmtudWZ4Ly84aHBWcjNlajgrYTY4TjRFY0VBbjlGb3JGNGdnY3htWkxTc3NoSkpwdkRmRUhoSmtXMWhMUmNZVmRLdFlhSTlZWVdBbW5xTFZlbzBRNUhuYTZKWGxaUENLUS9vRDhaMmlNZnhoTUgvU1IxNnNGc3ZxQ0IwT1ZxN2NwRzMyTFl6dGdESEk0blpKMHZWN2pkSFl0bDJqSThuaSsrOStjTDh6Y1VmaUY1Y3BNQUFBQUFTVVZPUks1Q1lJST0nLFxyXG4gICAgXHJcbn0pXHJcblxyXG5cclxuXHJcblxyXG4gICAgcHVibGljIG15SWNvbjogTC5pY29uID0gbnVsbDtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICBcclxuICAgICAgICBwcml2YXRlIGV2ZW50U2VydmljZTogRXZlbnRTZXJ2aWNlLFxyXG4gICAgICAgIHByaXZhdGUgb3BlcmF0aW9uU2VydmljZTogT3BlcmF0aW9uU2VydmljZSxcclxuICAgICAgICBwcml2YXRlIGFsZXJ0OiBBbGVydFNlcnZpY2UsXHJcbiAgICAgICAgcHJpdmF0ZSBpbnZlbnRvcnlTZXJ2aWNlOiBJbnZlbnRvcnlTZXJ2aWNlXHJcblxyXG4gICAgICAgICkge31cclxuXHJcbiAgICBuZ09uSW5pdCgpOiB2b2lkIHtcclxuICAgIFxyXG4gICAgICAgIFxyXG5cclxuICAgICAgICB0aGlzLm15bWFwID0gTC5tYXAoJ21hcGlkJykuc2V0VmlldyhbMjQuNzYwNjk4LCA1NS4zNjY1ODJdLCAxNSk7XHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdJIGFtIGhlcmUnKVxyXG5cclxuICAgICAgICBMLnRpbGVMYXllcignaHR0cHM6Ly9hcGkubWFwYm94LmNvbS9zdHlsZXMvdjEve2lkfS90aWxlcy97en0ve3h9L3t5fT9hY2Nlc3NfdG9rZW49e2FjY2Vzc1Rva2VufScsIHtcclxuICAgICAgICAgICAgYXR0cmlidXRpb246ICdNYXAgZGF0YSAmY29weTsgPGEgaHJlZj1cImh0dHBzOi8vd3d3Lm9wZW5zdHJlZXRtYXAub3JnL2NvcHlyaWdodFwiPk9wZW5TdHJlZXRNYXA8L2E+IGNvbnRyaWJ1dG9ycywgSW1hZ2VyeSDCqSA8YSBocmVmPVwiaHR0cHM6Ly93d3cubWFwYm94LmNvbS9cIj5NYXBib3g8L2E+JyxcclxuICAgICAgICAgICAgbWF4Wm9vbTogMTgsXHJcbiAgICAgICAgICAgIGlkOiAnbWFwYm94L3N0cmVldHMtdjExJyxcclxuICAgICAgICAgICAgdGlsZVNpemU6IDUxMixcclxuICAgICAgICAgICAgem9vbU9mZnNldDogLTEsXHJcbiAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiAnc2suZXlKMUlqb2lZMlYzT1RjMk5TSXNJbUVpT2lKamEzTjFhR3B2WkhJd01qbG9NbTl3ZERoMlpuTmtiV3RpSW4wLmttVWgyRUQzcmwzTFFBeWdxdXhyM3cnXHJcbiAgICAgICAgfSkuYWRkVG8odGhpcy5teW1hcCk7XHJcblxyXG4gICAgICAgICAgICAgICBcclxuICAgICAgICBsZXQgaSA9IDA7XHJcbiAgICAgICAgbGV0IHN1YnN0YXRpb25fbG9jYXRpb25zOiBudW1iZXJbXVtdID0gW1xyXG4gICAgICAgICAgICBbMjQuNzU4MDA4LDU1LjM2Mjk2N10sXHJcbiAgICAgICAgICAgIFsyNC43NTk3MzMsIDU1LjM2MTg3NV0sXHJcbiAgICAgICAgICAgIFsyNC43Njc2NjksIDU1LjM2OTYzOV0sXHJcbiAgICAgICAgICAgIFsyNC43NjE4MjIsIDU1LjM2MzI2N10sXHJcbiAgICAgICAgICAgIFsyNC43NjE3ODYsIDU1LjM2MzIxNF1cclxuICAgICAgICBdXHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IGxvY2F0aW9uX25hbWVzOiBzdHJpbmdbXSA9IFtcclxuICAgICAgICAgICAgXCJQSzExOTM5QVwiLFxyXG4gICAgICAgICAgICBcIlBLMTUzMjZBXCIsXHJcbiAgICAgICAgICAgIFwiUEsxNTAxOEFcIixcclxuICAgICAgICAgICAgXCJQSzE1MjkyQVwiLFxyXG4gICAgICAgICAgICBcIlBLMTUzMjRBXCJcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgXVxyXG4gICAgICAgIGxldCBhbGFybXM6IHN0cmluZ1tdID0gW1xyXG4gICAgICAgICAgICBcIlwiLFxyXG4gICAgICAgICAgICBcImNyaXRpY2FsXCIsXHJcbiAgICAgICAgICAgIFwiXCIsXHJcbiAgICAgICAgICAgIFwiXCIsXHJcbiAgICAgICAgICAgIFwiXCJcclxuICAgICAgICBdXHJcbiAgICAgICAgbGV0IGFsYXJtc19udW06IG51bWJlcltdID0gW1xyXG4gICAgICAgICAgICAwLFxyXG4gICAgICAgICAgICAyLFxyXG4gICAgICAgICAgICAwLFxyXG4gICAgICAgICAgICAwLFxyXG4gICAgICAgICAgICAwXHJcbiAgICAgICAgXVxyXG4gICAgICAgIGxldCBmZWVkZXJzX251bTogbnVtYmVyW10gPVtcclxuICAgICAgICAgICAgNSxcclxuICAgICAgICAgICAgNSxcclxuICAgICAgICAgICAgNSxcclxuICAgICAgICAgICAgNixcclxuICAgICAgICAgICAgN1xyXG4gICAgICAgIF1cclxuXHJcbiAgICAgICBcclxuICAgICAgICBsZXQgdXJsOiBzdHJpbmdbXSA9W1xyXG4gICAgICAgICAgICBgaHR0cHM6Ly9kZXdhLmV1LWxhdGVzdC5jdW11bG9jaXR5LmNvbS9hcHBzL2FwcC1idWlsZGVyL2luZGV4Lmh0bWwjL2FwcGxpY2F0aW9uLzU3NjQ2L2Rhc2hib2FyZC80MDUyODcvZGV2aWNlLzIxMjUwYCxcclxuICAgICAgICAgICAgYGh0dHBzOi8vZGV3YS5ldS1sYXRlc3QuY3VtdWxvY2l0eS5jb20vYXBwcy9hcHAtYnVpbGRlci9pbmRleC5odG1sIy9hcHBsaWNhdGlvbi81NzY0Ni9kYXNoYm9hcmQvODIyNjAwYCxcclxuICAgICAgICAgICAgYGh0dHBzOi8vZGV3YS5ldS1sYXRlc3QuY3VtdWxvY2l0eS5jb20vYXBwcy9hcHAtYnVpbGRlci9pbmRleC5odG1sIy9hcHBsaWNhdGlvbi81NzY0Ni9kYXNoYm9hcmQvODIzNTI0YCxcclxuICAgICAgICAgICAgYGh0dHBzOi8vZGV3YS5ldS1sYXRlc3QuY3VtdWxvY2l0eS5jb20vYXBwcy9hcHAtYnVpbGRlci9pbmRleC5odG1sIy9hcHBsaWNhdGlvbi81NzY0Ni9kYXNoYm9hcmQvODIxNzY1YCxcclxuICAgICAgICAgICAgYGh0dHBzOi8vZGV3YS5ldS1sYXRlc3QuY3VtdWxvY2l0eS5jb20vYXBwcy9hcHAtYnVpbGRlci9pbmRleC5odG1sIy9hcHBsaWNhdGlvbi81NzY0Ni9kYXNoYm9hcmQvODIyNjAzYFxyXG5cclxuICAgICAgICAgICBdXHJcblxyXG4gICAgICAgIGZvciAoaT0wOyBpPHN1YnN0YXRpb25fbG9jYXRpb25zLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIFxyXG5cclxuICAgICAgICAgICBcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmKGFsYXJtc1tpXSA9PSBcIlwiKXtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgdGhpcy5teUljb24gPSB0aGlzLmdyZWVuX2ljb247XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBlbHNlIGlmKGFsYXJtc1tpXSA9PSBcImNyaXRpY2FsXCIpe1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB0aGlzLm15SWNvbiA9IHRoaXMucmVkX2ljb247XHJcbiAgICAgICAgICAgICAgICBcclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG5cclxuICAgICAgICAgICAgdGhpcy5teUljb24ub3B0aW9ucy5pY29uU2l6ZSA9IFtcIjEwcHhcIiwgXCIxMHB4XCJdO1xyXG4gICAgICAgICAgICAgXHJcbiBcclxuICAgICAgICAgICAgbGV0IG1hcmtlciA9IEwubWFya2VyKFtzdWJzdGF0aW9uX2xvY2F0aW9uc1tpXVswXSwgc3Vic3RhdGlvbl9sb2NhdGlvbnNbaV1bMV1dLCAge2ljb246IHRoaXMubXlJY29ufSlcclxuICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGxldCBwcHN0cmluZyA9ICBgPGRpdiBjbGFzcz1cXFwiY2FyZFxcXCIgc3R5bGU9XFxcIndpZHRoOiAxNTBweDsgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7IGNvbG9yOiBibGFjaztcXFwiPiAgICAgICAgICAgICBcclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY2FyZC1ib2R5XFxcIj48YnI+PGg0IGNsYXNzPVxcXCJjYXJkLXRpdGxlXFxcIj48L2g0PiBcclxuICAgICAgICAgICAgICAgIDxociBzdHlsZSA9IFxcXCJtYXJnaW4tdG9wOiAycHg7IG1hcmdpbi1ib3R0b206IDJweDtcXFwiPiBcclxuICAgICAgICAgICAgICAgIDxkbD5cclxuICAgICAgICAgICAgICAgICAgICA8ZHQ+TmFtZTwvZHQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRkPiBgK2xvY2F0aW9uX25hbWVzW2ldK2AgPC9kZD5cclxuICAgICAgICAgICAgICAgICAgICA8aHIgc3R5bGUgPSBcXFwibWFyZ2luLXRvcDogMnB4OyBtYXJnaW4tYm90dG9tOiAycHg7XFxcIj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgPGhyIHN0eWxlID0gXFxcIm1hcmdpbi10b3A6IDJweDsgbWFyZ2luLWJvdHRvbTogMnB4O1xcXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGR0IHRyYW5zbGF0ZT1cXFwiXFxcIj5BY3RpdmUgQWxhcm1zPC9kdD5cclxuICAgICAgICAgICAgICAgICAgICA8ZGQ+PHNwYW4gY2xhc3MgPSBcXFwidGV4dC13YXJuaW5nXFxcIj5gICsgYWxhcm1zX251bVtpXSArIGA8L3NwYW4+PC9kZD5cclxuICAgICAgICAgICAgICAgICAgICA8ZHQgdHJhbnNsYXRlPVxcXCJcXFwiPk51bWJlciBvZiBmZWVkZXJzPC9kdD5cclxuICAgICAgICAgICAgICAgICAgICA8ZGQ+PHNwYW4gY2xhc3MgPSBcXFwidGV4dC13YXJuaW5nXFxcIj5gICsgZmVlZGVyc19udW1baV0gKyBgPC9zcGFuPjwvZGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPGhyIHN0eWxlID0gXFxcIm1hcmdpbi10b3A6IDJweDsgbWFyZ2luLWJvdHRvbTogMnB4O1xcXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGEgaHJlZiA9IFxcXCJgKyB1cmxbaV0gK2BcXFwiIGNsYXNzPVxcXCJjYXJkLWxpbmtcXFwiPkFjY2VzcyBEYXNoYm9hcmQ8L2E+XHJcbiAgICAgICAgICAgICAgICA8L2RsPjwvZGl2PjwvZGl2PmA7XHJcblxyXG4gICAgICAgICAgICBtYXJrZXIuYWRkVG8odGhpcy5teW1hcCk7XHJcblxyXG4gICAgICAgICAgICBtYXJrZXIuYmluZFBvcHVwKHBwc3RyaW5nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICBcclxuICAgIH07XHJcbn1cclxuXHJcblxyXG4iXX0=